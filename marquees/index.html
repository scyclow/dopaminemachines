<!--

Concept:
  - some mints are "the NFT"
  - other mings are web pages trying to sell the NFTs
  - sales pages take to form of CTA style adverts, news articles, social media pages, etc. -- each one linking to either each other or a target NFT
  - in all, each mint in the collection serves to hype itself up. a self-referential propaganda machine


  this NFT is HOT HOT HOT!ðŸ”¥
  this NFT will moonðŸŒ›
  Don't be a suckerðŸ¬



Things are moving fast, and if you want to make the most of this opportunity you need to pounce on it. Don't wait. Act Now. These deals won't last.





By using this website you agree to the terms...


Best viewed in Chrome X.X.XXX





TODO
  when viewed headlessly, maybe add a fake address bar to the thumbnail



MARQUEES TODO
  - generally slow down, espescially the slimmer ones
  - have more single grid components animate (instead of all of them animating)
  - split emojis up into better categories



 -->

<!DOCTYPE html>
<html translate="no" lang="en" class="notranslate">
<head>
  <meta charset="utf-8">
  <meta name="google" content="notranslate" />
  <title>$$$</title>
    <script>
      function genTokenData(projectNum) {

        const tokenId = String(projectNum * 1000000 + Math.floor(Math.random() * 1000))
        let hash = '0x'
        if (window.location.search.includes('?hash=')) {
          hash = window.location.search.slice(6)
        } else {
          for (let i = 0; i < 64; i++) {
            hash += Math.floor(Math.random() * 16).toString(16)
          }
          window.location.hash = '#' + hash

          const last10hashes = JSON.parse(localStorage.getItem('last10Hashes')) || []
          last10hashes.unshift(hash)

          localStorage.setItem('last10Hashes', JSON.stringify(last10hashes.slice(0, 10)))
        }
        return {
          hash,
          // hash: '0xfeff8806ffe0ff004900b6104392c062d40f238839029c82ed000ffff3cb2003',
          tokenId
        }
      }

      const tokenData = genTokenData(999)
      console.log(tokenData.hash)
    </script>

</head>
<body>

</body>

<script src="./utils.js"></script>
<script src="./$.js"></script>
<script src="./globals.js"></script>
<script src="./components.js"></script>
<script src="./text.js"></script>


<script>

  function sectionContainer(child, rSpan, cSpan, h, txtH, style) {
    const bwc = prb(0.5) ? { bg: '#000', text: '#fff' } : { bg: '#fff', text: '#000' }
    const txtColor = bw ? bwc.text : `hsl(${txtH}deg, ${sat}%, 50%)`
    const bgColor = bw ? bwc.bg : getBgColor(h)


    const rotation = threeDRotations
      ? `perspective(500px) rotate3d(1,1,1,${lineRotation()}deg)`
      : `rotate(${lineRotation()}deg)`

    const fontStyle = prb(italicRate) ? 'italic' : 'none'


    const borderWidth = min(rSpan, cSpan) * .05

    return $.div(
      withBgAnimation(child, rSpan, cSpan),
      {
        class: `${animation} ${rotateColor ? 'fullColorRotate' : ''} sectionContainer`,
        style: `
          border-style: ${borderStyle()};
          ${showBorder ? `border-width: ${borderWidth}vmin; box-sizing: border-box;` : 'border-width: 0;'}
          grid-column: span ${cSpan};
          grid-row: span ${rSpan};
          background: ${hideBg ? 'none' : bgColor};
          color: ${txtColor};
          transform: ${rotation};
          font-style: ${fontStyle};
          animation-delay: -${rnd(5)}s;
          animation-direction: ${rotateColor ?'normal' : animationDirection()};
          animation-duration: ${rotateColor ? '25' : animationDuration()}s;
          ${style || ''}
        `
      }
    )
  }


  function marqueeContainter(rSpan, cSpan) {
    const child = sample(content)
    const height = `calc(${100*rSpan/rows}vh)`
    const width = `calc(${100*cSpan/cols}vw)`
    const slow = 1 + child.innerHTML.length/9
    const h = chooseHue()
    const txtH = chooseAltHue(h)


    // const slowIx = child.indexOf('slow="')
    // slowIx !== -1 ? Number(child.slice(slowIx+6, slowIx+9)) : 1
    const sideways = prb(sidewaysPrb) && cSpan/rSpan < 1.2

    const msgAnimation = iden
      //rSpan >= rows * 0.25 && prb(0.5)
      // ? sample([
      //   dance,
      //   growShrinkShort,
      //   spin,
      //   hSiren,
      //   vSirenShort,
      //   hPivot,
      //   hFlip,
      //   leftRight,
      // ])
      // : iden


    const childEl =
    // childSpan.children[0]?.innerHTML.trim().length < 5 && prb(0.5)
    //     ? leftRight(childSpan, {style: `font-size: ${height}`, duration: rnd(1500, 4000), delay: rnd(2000)})
    //     :
        marquee(child, {
          style: `
            font-size: ${sideways ? width : height};
            text-shadow: ${getShadow(txtH)};
          `,
          direction: posOrNeg(),
          delay: rnd(-1000, 0),
          duration: rnd(0.01, 2) * slow * speed,
          sideways,
          msgAnimation
        })


    return sectionContainer(childEl, rSpan, cSpan, h, txtH)
  }

  function animationContainer(rSpan, cSpan) {
    const child = sample(content)
    const height = `calc(${100*rSpan/rows}vh)`
    const width = `calc(${100*cSpan/cols}vw)`
    const h = chooseHue()
    const txtH = chooseAltHue(h)

    const animation = sample([
      dance,
      growShrink,
      spin,
      hSiren,
      vSiren,
      hPivot,
      vPivot,
      vFlip,
      hFlip,
      updown,
      wave,
      climb,
    ])

    const words = child.innerHTML.split(' ')
    const shortest = words.reduce((shortest, word) => word.length < shortest.length ? word : shortest , words[0])

    const rowSizeMax = 5.5/(child.innerHTML.length)
    const colSizeMax = 7 *(cSpan/(cols*shortest.length))

    // if (child.innerHTML === 'EXCITING!!') debugger

    const fontAdj = (
      emojiList.includes(child.innerHTML)
        ? 1
        : min(colSizeMax, rowSizeMax)
    ) * (animation === vPivot ? 0.5 : 1)

    const secondAnimation = prb(0.75) ? iden : sample([
      dance,
      growShrink,
      spin,
      hSiren,
      vSiren,
      hPivot,
      vPivot,
      vFlip,
      hFlip,
      updown,
      wave,
      climb,
    ])

    const childEl = $.div(
      secondAnimation(
        animation(child,
          {
            delay: rnd(3500),
            duration: rnd(750, 5000)
          }
        ),
        {
          delay: rnd(3500),
          duration: rnd(750, 5000)
        }
      ),
      {
        style: `
          font-size: ${fontAdj*100*min(rSpan/rows, cSpan/cols)}vmin;
          text-shadow: ${getShadow(h)};
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
        `,
      }
    )
    // console.log(childEl, animation(child))

    return sectionContainer(childEl, rSpan, cSpan, h, txtH)
  }




  function flexSection(rowCells, colCells) {
    let rCursor = 0

    const cells = {}
    times(rowCells, r => cells[r] = [])

    const findNextFilledCol = (rC, cC) => {
      for (let c = cC; c < colCells; c++) {
        if (cells[rC][c]) return c
      }
      return colCells
    }

    const findNextUnfilledCol = (rC, cC) => {
      for (let c = cC; c < colCells; c++) {
        if (!cells[rC][c]) return c
      }

      return colCells
    }

    const marquees = []

    const colMax = prb(0.05) ? 3 : colCells
    const colMin = 12

    const rowMax = rowCells//prb(0.25) ? rowCells : min(4, rowCells)
    const rowMin = chance(
      [3, sample([24, 48])],
      [3, sample([6, 8, 12, 16])],
      [1, sample([2, 3, 4])],
      [1, 1],
    )


    while (rCursor < rowCells) {
      let cCursor = findNextUnfilledCol(rCursor, 0)

      while (cCursor < colCells) {
        const colsLeft = min(findNextFilledCol(rCursor, cCursor) - cCursor, colMax)
        const rowsLeft = min(rowCells - rCursor, rowMax)

        let cSpan = rndint(min(colMin, colsLeft), colsLeft)
        if (colsLeft - cSpan < colMin) cSpan = colsLeft

        const rSpan = rndint(min(rowMin, rowsLeft), max(1, rowsLeft))

        marquees.push(
          cSpan / rSpan < 1.25 && cSpan / rSpan > 0.8
            ? animationContainer(rSpan, cSpan)
            : marqueeContainter(rSpan, cSpan)
        )

        times(rSpan, r =>
          times(cSpan, c =>
            cells[rCursor+r] ? cells[rCursor+r][cCursor+c] = 1 : console.log(rowCells, rCursor, r)
          )
        )

        cCursor = findNextUnfilledCol(rCursor, cCursor + cSpan)
      }

      rCursor++
    }

    return $.section(
      marquees,
      {
        style: `
          width: ${100*colCells/cols}vw;
          height: ${100*rowCells/rows}vh;
          overflow: hidden;
          grid-row: span ${rowCells};
          grid-column: span ${colCells};
          display: grid;
          grid-template-rows: repeat(${rowCells}, 1fr);
          grid-template-columns: repeat(${colCells}, 1fr);
        `
      }
    )
  }




  /*
    Potential layouts

    Quarter components
      [Q || dynamic] [Q || dynamic]
      [Q || dynamic] [Q || dynamic]

    News Layout
      [H              ]
      [content  ][  Ad]
      [content  ][  Ad]
      [content  ][  Ad]

    Social Layout



    news component
    <container width/height based on grid>
      <header width/height based on content></header>
      <content fills remaining space></content>
    </container>



    quarter components
      grid of emojis/symbols, size wave
      grid of emojis/symbols, rotating wave
      one big emoji/symbol, grow/shrink
      emoji(s)/symbol(s) bounce around
      single emoji/symbol rotating


    marquee varient
      if r > c
        bounce left<>right
      if c > r
        bounce up<>down


  */



  function shortComponentContainer(size) {}

  function tallComponentContainer(size) {}

  function normalComponentContainer(children, size, style) {
    return $.section(
      children, {
        class: 'normalComponentContainer',
        style: `
          overflow: hidden;
          grid-row: span ${size*rows};
          grid-column: span ${size*cols};
          display: inline-flex;
          align-items: center;
          justify-content: center;
          ${style || ''}
        `
      }
    )
  }
  function flexboxSection(children, size, style='') {
    return $.div(children, {
      style: `
        grid-row: span ${size*rows};
        grid-column: span ${size*cols};
        display: flex;
        align-items: center;
        justify-content: center;
        ${style || ''}
      `
    })
  }




  function singleGrowShrinkDance(content, size, delay=0) {
    return growShrink(dance(content, { style: `font-size: ${size*50}vmin` }), {delay})
  }


  function multipleGrowShrinkDance(content, size) {
    const children = times(20, t => growShrink(
      dance(
        content, {
          style: `font-size: ${size*20}vmin;`,
          delay: t*200/20
        }), {
        delay: (t*1000)/20
      })
    )

    return $.div(children, {
      style: `
        height: ${size*100}vh;
        width: ${size*125}vw;
        display: grid;
        grid-template-rows: repeat(4, 1fr);
        grid-template-columns: repeat(5, 1fr);
        align-items: center;
        justify-items: center;
      `
    })
  }


  function multipleGrowShrinkDance2(content, size, cells) {
    const totalCells = cells * cells * 1.25
    const children = times(totalCells, t => growShrink(
      dance(
        content, {
          style: `font-size: ${size*20 * (20/totalCells)}vmin;`,
          delay: t*200/totalCells
        }), {
        delay: (t*1000)/totalCells
      })
    )


    return $.div(children, {
      style: `
        height: ${size*100}vh;
        width: ${size*125}vw;
        display: grid;
        grid-template-rows: repeat(${cells}, 1fr);
        grid-template-columns: repeat(${int(cells*1.25)}, 1fr);
        align-items: center;
        justify-items: center;
      `
    })
  }



  function singleSpin(content, size) {
    return spin(content, { style: `font-size: ${size*50}vmin` })
  }

  function singlePivot(content, size) {
    return pivot(content, { style: `font-size: ${size*40}vmin` })
  }

  function singleLeftRight(content, size) {
    return leftRight(content, { style: `font-size: ${size*30}vmin`, duration: 2000 })
  }




  function comment(size) {
    return $.div([
        $.div('ðŸ™‚'),
        $.div('Wow, what a great comment!')
      ], {
        style:`
          border: 2px solid black;
          border-radius: 4px;
          padding: 1em;
          display: flex;
          align-items: center;
        `
      }
    )
  }









  function socialLayout(size) {
    return $.section([
        $.div(
          [],
          {
            style: `
              grid-column: span 3;
              border: 3px solid black;
              display: flex;
              flex-direction: column;
              align-items: center;
              overflow: scroll;
            `
          }
        ),



        $.div([
          comment(0.5),
          comment(0.5),
          comment(0.5),
          comment(0.5),
          comment(0.5),
        ], {
          style: `
            grid-column: span 5;
            border: 3px solid black;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: scroll;
          `
        }
      ),



        $.div(times(10, t => {
          const child = sample(content)

          return growShrink(child, {delay:rnd(1000), duration: rnd(500, 4000) ,style: `font-size: ${20-child.length/6}vmin`})
        }), {
            style: `
              grid-column: span 2;
              border: 3px solid black;
              display: flex;
              flex-direction: column;
              align-items: center;
              overflow: scroll;
            `
          }),
      ], {
      style: `
        overflow: hidden;
        grid-row: span ${size*rows};
        grid-column: span ${size*cols};
        display: grid;
        grid-template-rows: 1fr;
        grid-template-columns: repeat(10, 1fr);
      `
    })
  }



  function componentViewerSection(size, content, delay) {
    return $.section(
      normalComponentContainer(

        (wave('HOLY MOLY', { style: `font-size: 10vmin`, duration: 2000 })),
        // vSiren('WOW', { style: `font-size: 10vmin`}),
        size,
        `
          background: radial-gradient(#fff 0%, #eee 40%, #bbb 70%, #000 150%);
        `
      )
      // flexSection(rows*size, cols*size)


      , {
        style: `
          border: 1px solid red;
          overflow: hidden;
          grid-row: span ${size*rows};
          grid-column: span ${size*cols};
          display: grid;
          grid-template-rows: repeat(${size*rows}, 1fr);
          grid-template-columns: repeat(${size*cols}, 1fr);
        `
      }
    )
  }


  setMetadata()



  const main = $.main(
    [
      flexSection(rows, cols)
      // socialLayout(1)
      // componentViewerSection(0.5)
      // normalComponentContainer(singlePivot(`ðŸ”¥`, 0.5), 0.5),
      // normalComponentContainer(multipleGrowShrinkDance(`ðŸ”¥`, 0.5, 4), 0.5),
      // normalComponentContainer(singleGrowShrinkDance(`ðŸ™‚`, 0.5, 4), 0.5),
      // normalComponentContainer(singleGrowShrinkDance(`ðŸŒŽ`, 0.5, 4), 0.5),
      // normalComponentContainer(multipleGrowShrinkDance(`ðŸ’¸`, 0.5, 4), 0.5),
    ],
    {
      id: 'main',
      style: `
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        display: grid;
        grid-template-rows: repeat(${rows}, 1fr);
        grid-template-columns: repeat(${cols}, 1fr);
      `
    }
  )





  $.render($body, main)









</script>
</html>