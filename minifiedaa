const min=Math.min,max=Math.max,abs=Math.abs,round=Math.round,int=parseInt,map=(e,t,n,o,i)=>o<i?o+(e-t)/(n-t)*(i-o):o-(e-t)/(n-t)*(o-i);let __randomSeed=int(tokenData.hash.slice(50,58),16),rCount=0;function rnd(e,t){rCount++,__randomSeed^=__randomSeed<<13,__randomSeed^=__randomSeed>>17;const n=((__randomSeed^=__randomSeed<<5)<0?1+~__randomSeed:__randomSeed)%1e3/1e3;return null!=t?e+n*(t-e):null!=e?n*e:n}const iden=e=>e,rndint=(e,t)=>int(rnd(e,t)),prb=e=>rnd()<e,posOrNeg=()=>prb(.5)?1:-1,sample=e=>e[Math.floor(rnd(e.length))],noop=()=>{};function chance(...e){const t=e.reduce((e,t)=>e+t[0],0),n=rnd();let o=0;for(let i=0;i<e.length;i++){if(n<=(o+=(!0===e[i][0]?1:!1===e[i][0]?0:e[i][0])/t)&&e[i][0])return e[i][1]}}function times(e,t){const n=[];for(let o=0;o<e;o++)n.push(t(o));return n}const allRunningIntervals=[];function setRunInterval(e,t,n=0){const o=()=>{e(n),n++};o();let i=!1,r=setInterval(o,t);const a=()=>{i||(clearInterval(r),i=!0)};return allRunningIntervals.push({newInterval:e=>{i||(clearInterval(r),r=setInterval(o,e))},stopInterval:a,originalMs:t}),a}const IS_HEADLESS=((window.navigator||{}).userAgent||[]).includes("eadless"),TWEMOJI_PRESENT=!!window.twemoji,$=(e,t,n)=>e.style[t]=n;$.cls=((e,t)=>Array.isArray(e)?e.map(e=>$.cls(e,t)).flat():Array.from(e.getElementsByClassName(t))),$.render=((e,t)=>{t&&("string"==typeof t?e.innerHTML=t:Array.isArray(t)?"string"==typeof t[0]?t.forEach(t=>{e.innerHTML+="string"==typeof t?t:t.outerHTML}):e.append(...t.flat()):e.append(t))}),$.create=(e=>(t,n={})=>{const o=document.createElement(e);return $.render(o,t),Object.keys(n).forEach(e=>{o.setAttribute(e,n[e])}),o}),$.a=$.create("a"),$.div=$.create("div"),$.span=$.create("span"),$.main=$.create("main"),$.section=$.create("section");const $html=document.getElementsByTagName("html")[0];let queryParams;try{queryParams=window.location.search?window.location.search.replace("?","").split("&").reduce((e,t)=>{const[n,o]=t.split("=");return e[n]=o,e},{}):{}}catch(e){queryParams={}}const addMetaTag=e=>{const t=document.createElement("meta");Object.keys(e).forEach(n=>{t[n]=e[n]}),document.head.appendChild(t)};function css(e){const t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}function setMetadata(e){$html.translate=!1,$html.lang="en",$html.className="notranslate";const t=e.join(" ");document.title=t,addMetaTag({name:"google",content:"notranslate"}),addMetaTag({name:"description",content:t}),addMetaTag({name:"keywords",content:e.join(", ")}),console.log(t)}const ls={get(e){try{return window.localStorage&&window.localStorage.getItem&&JSON.parse(window.localStorage.getItem(e))}catch(e){console.log(e)}},set(e,t){try{return window.localStorage.setItem(e,t)}catch(e){console.log(e)}}},cols=60,rows=48,EDITION_SIZE=777,projectionPages={};let LAST_PAUSED,OVERDRIVE,ANHEDONIC,INVERT_ALL,PAUSED=ls.get("__DOPAMINE_IS_PAUSED__")||!1,USE_EMOJI_POLYFILL=TWEMOJI_PRESENT&&(IS_HEADLESS||ls.get("__DOPAMINE_EMOJI_TOGGLE__")||!1);const speed=prb(.05)?100:3,italicRate=chance([1,rnd()],[1,1],[8,0]),fontWeight=chance([1,100],[8,500],[1,900]),fontFamily=chance([5,"serif"],[5,"cursive"],[15,"monospace"],[75,"sans-serif"]),layoutStyle=chance([55,1],[6,2],[7,3],[6,4],[7,5],[5,6],[6,7],[3,8],[5,9]),rowSize=sample([1,2,3,4,6,8,12,16,24]),colSize=sample([2,3,4,6,10,15]),cellSize=sample([3,4,6,12,16]),sidewaysPrb=prb(.4)?0:rnd(.5,1),thinSidewaysPrb=6!==layoutStyle?.95:chance([9,.66],[9,.95],[2,0]),marqueeAnimationRate=chance([85,0],[20,rnd(.25,.5)],[5,1]),tokenId=Number(tokenData.tokenId)%1e6,is69=69===tokenId,is7=[7,77].includes(tokenId),is100=100===tokenId,is420=420===tokenId,is666=666===tokenId,projectId=(Number(tokenData.tokenId)-tokenId)/1e6,showEmojis=is100||is666||is7||is420||is69||prb(.5),pairedEmojiPrb=chance([2,0],[1,.5],[1,1]),upsideDownRate=chance([9,0],[1,rnd(.1,.3)]),mildRotation=()=>rnd(20);mildRotation.isMild=!0;const lineRotation=chance([92,()=>prb(upsideDownRate)?180:0],[6,mildRotation],[2,()=>rnd(20,180)]),freeFloating=![0,180].includes(lineRotation()),threeDRotations=lineRotation.isMild&&prb(.3333),bgType=chance([55,0],[12,1],[20,2],[8,3],[3,4],[2,5]),bgAnimationPrb=chance([12,0],[bgType<3&&6,rnd(.25,.5)],[bgType<3&&2,1]),BW=prb(.15),STARTING_HUE=rnd(360),randomHue=prb(.02),chooseHue=()=>randomHue?rnd(360):STARTING_HUE+sample(possibleHues)%360,chooseAltHue=e=>{const t=chooseHue();return e===t?chooseAltHue(e):t},possibleHues=chance([1===bgType&&2,[0,1e-4]],[1,[0,180]],[1,[0,120,180]],[1,[0,180,240]],[1,[0,150]],[1,[0,210]],[1,[0,120,240]],[1,[0,75]]),shadowType=chance([4,1],[4,2],[BW?1:4,3],[4,4],[4,5],[2,6],[2,7],[4,8],[2,9]),defaultShadowLightness=BW||!prb(.75)&&75!==possibleHues[1]?50:20,getShadowColor=(e,t=50)=>`hsl(${e%360}deg, 100%, ${t}%)`,getShadowText=(e,t)=>{const n=8===shadowType?"#fff":getShadowColor(e+90,defaultShadowLightness),o=t?.0125:.025;return[1,8].includes(shadowType)?[`${o}em ${o}em ${n}`,`-${o}em ${o}em ${n}`,`${o}em -${o}em ${n}`,`-${o}em -${o}em ${n}`,`${o}em 0 ${n}`,`-${o}em 0 ${n}`,`0 -${o}em ${n}`,`0 ${o}em ${n}`,`0 0 0.4em ${n}`]:2===shadowType?[`0.05em 0.05em 0 ${n}`]:3===shadowType?[`0.1em 0.1em 0 ${n}`]:4===shadowType?[`0.05em 0.05em 0 ${n}`,`${t?"0.05em 0.05em":"0.1em 0.1em"} 0 ${getShadowColor(e+270)}`]:5===shadowType?[`0 0 0.05em ${n}`]:6===shadowType?times(4,t=>`${t<2?-.04:.04}em ${t%2?.04:-.04}em 0 ${getShadowColor(e+180+30*t)}`):7===shadowType?[`-0.05em -0.05em 0 ${getShadowColor(e+60)}`,`0.05em 0.025em 0 ${getShadowColor(e+240)}`]:["0 0 0.05em #000"]},getDropShadowValue=e=>getShadowText(e,!0).map(e=>`drop-shadow(${e})`).join(" "),getTextShadowValue=e=>getShadowText(e).join(","),getShadow=(e,t)=>USE_EMOJI_POLYFILL&&!t?`filter: ${getDropShadowValue(e)};`:`text-shadow: ${getTextShadowValue(e)};`,hideBg=!!freeFloating&&prb(.5),showBorder=prb(.5),bgAnimationType=chance([3,0],[2,1],[2,2],[2,3],[1,4]),increasedottedBorderStyle=bgAnimationPrb&&0===bgAnimationType,borderStyle=chance([4,"solid"],[increasedottedBorderStyle?5:1,"dashed"],[increasedottedBorderStyle?4:1,"dotted"],[1,"double"]),sectionAnimation=prb(.95)?"":sample([showBorder&&"borderBlink","blink","dance","growShrink","spin","hPivot","vPivot","breathe"].filter(iden)),sectionAnimationDirection=chance([1,()=>"normal"],[1,()=>"reverse"],[1,()=>prb(.5)?"normal":"reverse"]),sectionAnimationDuration=()=>rnd(2,"blink"===sectionAnimation?5:17),gradientHues=chance([3-possibleHues.length,possibleHues.slice(1)],[1,[30,330]],[1,[60,300]]),zigzagBg=(e,t,n)=>`background-color:${e};background-image:linear-gradient(135deg, ${t} 25%, transparent 25%), linear-gradient(225deg, ${t} 25%, transparent 25%), linear-gradient(45deg, ${t} 25%, transparent 25%), linear-gradient(315deg,${t} 25%, ${e} 25%);background-position:${n/2}em 0,${n/2}em 0,0 0,0 0;background-size:${n}em ${n}em;background-repeat:repeat;`,gradientMix=sample([0,1,.5]),getColorFromHue=e=>`hsl(${e%360}deg, 100%, 50%)`;function getBgColor(e){const t=getColorFromHue(e),n=getColorFromHue(e+sample(gradientHues));return 1===bgType?"none;":2===bgType?prb(gradientMix)?`radial-gradient(${t}, ${n});`:`linear-gradient(${rndint(360)}deg, ${t}, ${n});`:3===bgType?zigzagBg(t,n,.25):4===bgType?zigzagBg(t,n,rnd(8,16)):5===bgType?zigzagBg(t,n,1):t}const starburstBgPrb=chance([8.5,0],[1,.2],[.5,1]);let starburstCount=0;function starburstBg(e,t,n){if(!prb(starburstBgPrb)||t<4)return;starburstCount++;const o=chooseHue(),i=prb(.5)?{bg:"#000",text:"#fff"}:{bg:"#fff",text:"#000"},r=BW?i.text:`hsl(${e}deg, 100%, 50%)`;let a=BW?i.bg:`hsl(${o}deg, 100%, 50%)`;a=1===bgType?"#000":r===a?"#fff":a;const s=chance([2,2],[10,5],[8,10]),l=`cgBg-${int(e)}-${int(o)}`;return css(`.${l}::before {content:"";background:repeating-conic-gradient(${r} 0deg ${s}deg,  ${a} ${s}deg ${2*s}deg);position:absolute;width:12800%;height:12800%;top:-6350%;left:-6350%;z-index:-1;animation:BgRotate${s} ${rnd(1e3,5e3)}ms linear infinite;animation-direction:${prb(.5)?"normal":"reverse"}} @keyframes BgRotate${s} {0% {transform:rotate(0deg);} 100% {transform:rotate(${2*s}deg);}}`),l}const bgColor=chance([1!==bgType&&2,`hsl(${chooseHue()}deg, 100%, 50%)`],[1!==bgType&&1,"#fff"],[1,"#000"]),rotateColorPrb=chance([9,0],[1,rnd(.1,.2)]),colorBlinkPrb=chance([95,0],[4,rnd(.1,.2)],[1,1]),fullHueRotation=prb(.02),invertAll=prb(.02);css(`* {margin:0;padding:0;font-family:${fontFamily};font-weight:${fontWeight};} body, body::backdrop {background:${bgColor};margin:0;${fullHueRotation?"animation:HueRotation 10s linear infinite;":""} } @keyframes HueRotation {0% { filter:hue-rotate(0deg) } 0% { filter:hue-rotate(360deg) } } .viewerMode {cursor:none;pointer-events:none;} .viewerMode .sectionContainer:hover {filter:invert(${invertAll?1:0});} .pauseAll, .pauseAll *, .pauseAll *::before {animation-play-state:paused !important;} .fullScreen {position:absolute;top:0;bottom:0;left:0;right:0;height:100vh;width:100vw;z-index:100;} .overdrive .marquee * {animation-duration:10s !important;} .overdrive *::before {animation-duration:100ms !important;} .overdrive .bgAnimation {animation-duration:300ms !important;} .overdrive .animatingComponent {animation-duration:250ms !important;} .overdrive .sectionContainer {animation-duration:750ms !important;} .overdrive .charContent {animation-duration:205ms !important;} .overdrive {filter:contrast(300%) saturate(300%);} .anhedonic {background:#555;filter:blur(0.08vw) saturate(0.15);} .anhedonic .marquee * {animation-duration:800s !important;} .anhedonic *::before {animation-duration:3s !important;} .anhedonic .bgAnimation {animation-duration:12s !important;} .anhedonic .animatingComponent {animation-duration:16s !important;} .anhedonic .sectionContainer {animation-duration:32s !important;} .anhedonic .charContent {animation-duration:2505ms !important;} .invertAll {filter:invert(1);} ::selection {color:#fff; background-color:#000;}`);let START_TIME=Date.now();const MAX_VOLUME=.04,allSources=[];function createSource(e="square"){const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),o=t.createGain(),i=new StereoPannerNode(t);n.connect(o),o.connect(i),i.connect(t.destination),o.gain.value=0,n.type=ANHEDONIC?"sine":e,n.frequency.value=3e3,n.start();const r={source:n,gain:o,smoothFreq:(e,o=1e-5,i=!1)=>{PAUSED&&!i||n.frequency.exponentialRampToValueAtTime(e,t.currentTime+o)},smoothGain:(e,n=1e-5)=>{PAUSED||o.gain.setTargetAtTime(min(e,MAX_VOLUME),t.currentTime,n)},smoothPanner:(e,n=1e-5)=>{PAUSED||i.pan.exponentialRampToValueAtTime(e,t.currentTime+n)},originalSrcType:n.type};return allSources.push(r),r}function sourcesToAnhedonicMode(){allSources.forEach(e=>{e.gain.gain.value>0&&(e.source.type="sine")})}function sourcesToNormalMode(){allSources.forEach(e=>{e.gain.gain.value>0&&(e.source.type=e.originalSrcType)})}function soundOverdrive(e=1){allRunningIntervals.forEach(t=>{t.newInterval(t.originalMs/e)})}const BASE_FREQ=rnd(250,500),MAJOR_SCALE=[1,1.125,1.25,1.3333,1.5,1.6666,1.875,2],HEXATONIC_SCALE=[1,1.125,1.25,1.5,1.75,2],JACK_DUMP_SCALE=[1,1,1.25,1.3333,1.5,1.3333,1.25,1],getLoopsAtTime=(e,t,n)=>(OVERDRIVE?8:1)*(e-(START_TIME-t))/n;function sirenSound({delay:e,duration:t},n="square",o=1){let i=o*sample(MAJOR_SCALE)*BASE_FREQ,r=o*i/5;prb(.5)&&([i,r]=[r,i]);const a=i-r,s=n=>2*getLoopsAtTime(n,e,t),l=e=>{const t=(e=>int(s(e))%2?1:-1)(e),n=s(e)%1*a;return 1===t?r+n:i-n},c=prb(.1)?rnd(1e3,2500):2e3;return(e=0)=>{const{smoothFreq:o,smoothGain:i}=createSource(n);let r;return i(MAX_VOLUME),o(l(Date.now()+250),.25),setTimeout(()=>{const n=(1-s(Date.now()+e)%1)*t/2;o(l(Date.now()+n),n/1e3),setTimeout(()=>{r=setRunInterval(n=>{o(l(Date.now()+t/2+e),n%2?t/2e3:t/c)},t/16)},n)},250),()=>{i(0,.04),r&&r()}}}function shrinkCharSound({delay:e,duration:t}){const n=sirenSound({duration:t,delay:e},"sine"),o=sirenSound({duration:t,delay:e+.25*t},"sine",.5),i=sirenSound({duration:t,delay:e+.5*t},"sine",.5),r=sirenSound({duration:t,delay:e+.75*t},"sine",.5);return()=>{const e=createSource("sine"),t=createSource("sine");e.smoothFreq(BASE_FREQ/2),t.smoothFreq(BASE_FREQ/1.98),e.smoothGain(MAX_VOLUME,.1),t.smoothGain(MAX_VOLUME,.1);const a=n(),s=o(),l=i(),c=r();return()=>{e.smoothGain(0,.1),t.smoothGain(0,.1),a(),s(),l(),c()}}}function flipSound({delay:e,duration:t}){const n=sample(MAJOR_SCALE)*BASE_FREQ*8,o=n/3,i=i=>{const r=getLoopsAtTime(i,e,t)%1;return r<.3333?map(r,0,.3333,o,BASE_FREQ):r<.6666?map(r,.3333,.6666,BASE_FREQ,n):map(r,.6666,1,n,o)};return(n=0)=>{const{smoothFreq:o,smoothGain:r}=createSource();let a;return r(MAX_VOLUME),o(i(Date.now()+250),.25),setTimeout(()=>{const r=(1-getLoopsAtTime(Date.now()+n,e,t)%1)%.3333*t;o(i(Date.now()+r+n),r/1e3),setTimeout(()=>{a=setRunInterval(e=>{o(i(Date.now()+t/3+n),t/3e3)},t/24)},r)},250),()=>{r(0,.04),a&&a()}}}function smoothSound({delay:e,duration:t}){const n=int(map(t,0,5e3,5,0)),o=BASE_FREQ*[.5,1,1.25,1.5,2][n],i=prb(.3),r=i?1:.8;return(e=0)=>{const n=createSource(),a=createSource();let s,l;if(i)s=BASE_FREQ/8,l=BASE_FREQ/7.98;else{s=o,l=o+1e6/(t*o)}n.smoothFreq(s);const c=setRunInterval(()=>{PAUSED||OVERDRIVE?a.smoothFreq(s,1e-5,!0):a.smoothFreq(l)},500);return n.smoothGain(MAX_VOLUME*r,.25),a.smoothGain(MAX_VOLUME*r,.25),()=>{c&&c(),n.smoothGain(0,.25),a.smoothGain(0,.25)}}}function ticktockSound({duration:e,delay:t}){const n=BASE_FREQ*sample([1,.5,2]),o=e/2,i=sample(MAJOR_SCALE);return(r=0)=>{const{smoothFreq:a,smoothGain:s}=createSource(),{smoothFreq:l,smoothGain:c}=createSource(),m=(1-getLoopsAtTime(Date.now(),t,e)%1)%.5*e;let d;return setTimeout(()=>{d=setRunInterval(e=>{s(MAX_VOLUME,.03),c(MAX_VOLUME,.03),e%2?(a(n,.1),l(n+5,.1)):(a(n*i,.1),l(n*i+5,.1)),setTimeout(()=>s(0,.05),.25*o),setTimeout(()=>c(0,.05),.25*o)},o),OVERDRIVE&&soundOverdrive(6)},m),()=>{s(0,.03),c(0,.03),d&&d()}}}function blinkCharSound({duration:e,delay:t},n=null){const o=sample([0,1,2]),i=prb(.1),r=!i&&prb(.5),a=prb(.1),s=sample(MAJOR_SCALE)*BASE_FREQ*chance([5,1],[3,2],[1,.5],[1,.25]),l=sample([2,1.5,1.3333]),c=(e=e?map(e,750,5e3,500,2e3):rnd(500,2e3))/8;return(e=0)=>{const{smoothFreq:t,smoothGain:n}=createSource(),m=createSource();r&&(n(MAX_VOLUME),a&&m.smoothGain(MAX_VOLUME));const d=setRunInterval(e=>{let d;switch(r||(n(MAX_VOLUME),a&&m.smoothGain(MAX_VOLUME)),o){case 0:d=e%8;break;case 1:d=abs(7-e%8);break;case 2:d=e%14<7?e%14:abs(7-e%7)}const u=i?JACK_DUMP_SCALE[e%8]*(e%64<32?1:.85):MAJOR_SCALE[d];t(s*u),a&&m.smoothFreq(s*u*l),r||setTimeout(()=>{n(0,.04),a&&m.smoothGain(0,.04)},.75*c)},c);return OVERDRIVE&&soundOverdrive(6),()=>{n(0,.04),a&&m.smoothGain(0,.04),d&&d()}}}function hexSound({duration:e,delay:t}){const n=BASE_FREQ,o=e/6;sample(MAJOR_SCALE);return(i=0)=>{const{smoothFreq:r,smoothGain:a}=createSource(),{smoothFreq:s,smoothGain:l}=createSource(),c=(1-getLoopsAtTime(Date.now(),t,e)%1)%(1/6)*e;let m;return setTimeout(()=>{m=setRunInterval(e=>{r(8*n),s(8*n),a(MAX_VOLUME,.03),l(MAX_VOLUME,.03),r(n/4,.25),s(n/4,.25),setTimeout(()=>a(0,.05),.25*o+i),setTimeout(()=>l(0,.05),.25*o+i)},o)},c),()=>{m&&m(),a(0,.03),l(0,.03)}}}function climbSound({duration:e,delay:t}){const n=sample(HEXATONIC_SCALE)*BASE_FREQ,o=e/4;return(i=0)=>{const{smoothFreq:r,smoothGain:a}=createSource(),s=(1-getLoopsAtTime(Date.now(),t,e)%1)%.25*e;let l;return setTimeout(()=>{l=setRunInterval(t=>{a(MAX_VOLUME),r(n*HEXATONIC_SCALE[1===e?t%4:3-t%4]),setTimeout(()=>a(0,.05),.75*o+i)},e/4),OVERDRIVE&&soundOverdrive(6)},s+4*i),()=>{l&&l(),a(0,.04)}}}function zoomSound({duration:e,delay:t,switchChannels:n}){const o=sample(MAJOR_SCALE)*BASE_FREQ*4,i=o/16,r=n=>{const r=getLoopsAtTime(n,t,e)%1;return r<.25?i:r<.5?map(r,.25,.5,i,o):map(r,.5,1,o,1)};return(o=0)=>{const{smoothFreq:i,smoothGain:a,smoothPanner:s}=createSource(),l=(1-getLoopsAtTime(Date.now(),t,e)%1)%.25*e;let c;return a(MAX_VOLUME),i(r(Date.now()+l),l/1e3),setTimeout(()=>{if(c=setRunInterval(t=>{i(r(Date.now()+e/4+o),e/4e3)},e/4),n){const n=int(getLoopsAtTime(Date.now(),t,e))%2?150:50;setRunInterval(e=>{const t=map((e+n)%200,0,200,0,Math.PI),o=2*(Math.sin(t)-.5);s(o)},e/100)}},l),()=>{a(0,.04),c&&c()}}}function carSirenSound({duration:e,delay:t}){const n=sample(MAJOR_SCALE),o=n*BASE_FREQ/2,i=sample(MAJOR_SCALE.filter(e=>e!==n)),r=o/i,a=n=>{const i=getLoopsAtTime(n+250,t,e)%1;return i<.25||i>.75?r:o};return(n=0)=>{const o=createSource(),i=createSource(),r=createSource();o.smoothGain(.85*MAX_VOLUME),i.smoothGain(.85*MAX_VOLUME),r.smoothGain(.85*MAX_VOLUME);const s=(1-getLoopsAtTime(Date.now()+250,t,e)%1)%.5*e;let l;return o.smoothFreq(a(Date.now()),s/1e3),i.smoothFreq(1.3333*a(Date.now()),s/1e3),r.smoothFreq(1.6666*a(Date.now()),s/1e3),setTimeout(()=>{l=setRunInterval(e=>{o.smoothFreq(a(Date.now()+n),.25),i.smoothFreq(1.3333*a(Date.now()+n),.25),r.smoothFreq(1.6666*a(Date.now()+n),.25)},e/2)},s),()=>{o.smoothGain(0,.04),i.smoothGain(0,.04),r.smoothGain(0,.04),l&&l()}}}function singleSound(){const e=rndint(1e3,4e3),t=()=>{const{smoothFreq:n,smoothGain:o}=createSource();return o(MAX_VOLUME),n(e,.05),setTimeout(()=>{n(.1,1)},50),()=>{t()}};return t}let voices,ACTIVE_VOICE_IX=0;const filterVoices=e=>{const t=e=>e.lang&&e.lang.includes(queryParams.voiceLang||"en-US");try{let n=e.filter(t);n=n.length?n:e;let o=queryParams.voice?e.find(e=>e.voiceURI.toLowerCase().includes(queryParams.voice.toLowerCase())):e.find(e=>e.default);return t(o)||(o=e.find(t)),queryParams.voice||!queryParams.voiceLang?[o,...n.slice(1)]:n}catch(t){return e}};function selectVoice(e){ACTIVE_VOICE_IX=voices.length&&e%voices.length,console.log("VOICE SELECTED:",voices[ACTIVE_VOICE_IX].voiceURI)}const getVoices=()=>{try{voices=window.speechSynthesis.getVoices(),setTimeout(()=>{voices.length?voices=filterVoices(voices):getVoices()},200)}catch(e){console.log(e)}};getVoices();let activeUtterance,utteranceQueue=[],utterancePriority=null;const triggerUtterance=()=>{if(PAUSED)return void setTimeout(triggerUtterance,250);const e=rndint(utteranceQueue.length);let t;utterancePriority?(t=utterancePriority,utterancePriority=null):t=utteranceQueue.splice(e,1)[0],t&&(activeUtterance=t,t.volume=.88,t.voice=voices[ACTIVE_VOICE_IX],OVERDRIVE?(t.pitch=sample(MAJOR_SCALE),t.volume=1.1):t.pitch=1,t.rate=ANHEDONIC?.7:OVERDRIVE?1.4:1,t.onend=(()=>{utteranceQueue.length&&triggerUtterance()}),t.addEventListener("error",e=>{console.error("SpeechSynthesisUtterance error",e)}),window.speechSynthesis.speak(t),setTimeout(()=>rescueSS(t),6e3))};let isRescuing;function rescueSS(e){isRescuing||!utteranceQueue.some(t=>t.text===e.text)||PAUSED||activeUtterance===e&&(isRescuing=!0,window.speechSynthesis.cancel(),window.speechSynthesis.speak(e),isRescuing=!1)}const stopUtter=e=>{utteranceQueue=utteranceQueue.filter(t=>t.text!==e.toLowerCase()),utterancePriority=null},utter=(e,t=1,n=7)=>{const o=e.toLowerCase();try{const e=utteranceQueue.length;times(t,()=>{utteranceQueue.push(new window.SpeechSynthesisUtterance(o))}),utterancePriority=new window.SpeechSynthesisUtterance(o),e||triggerUtterance()}catch(e){console.log(e)}};function colorBlinkAnim(){const e=chooseHue();return`0%,100% {color:${getColorFromHue(e)};background-color:${getColorFromHue(e+possibleHues[1])};}`+possibleHues.length===2?`50% {color:${getColorFromHue(e+possibleHues[1])};background-color:${getColorFromHue(e)};}`:`33% {color:${getColorFromHue(e+possibleHues[1])};background-color:${getColorFromHue(e+possibleHues[2])};} 66% {color:${getColorFromHue(e+possibleHues[2])};background-color:${getColorFromHue(e)};}`}function marquee(e,t={}){const n=t.className||"",o=t.style||"",i=t.direction||1,r=t.delay||0,a=t.duration||1,s=t.sideways||!1,l=t.msgAnimation||iden,c=elementIsEmoji(e)?60:40,m=(e,t,n)=>{const o=elementIsEmoji(e),i=(o||n>0?.1:.5)+"em";return l($.span(e,{style:`margin-left:${i};margin-right:${i};font-size:${o?.9:1}em;`}).cloneNode(!0),{delay:100*t+n/2})},d=$.div(times(c,t=>Array.isArray(e)?e.map((e,n)=>m(e,t,n)):m(e,t,0)).flat(),{class:"marqueeInner marqueeForward",style:`animation-delay:-${r}s;animation-duration:${a/(c/40)}s;animation-direction:${1===i?"normal":"reverse"};`});return $.div(d,{style:o+(s?`transform: rotate(${sample([90,270])}deg);`:""),class:`component marquee ${n}`})}function genericAnimatingComponent(e){return(t,n={})=>{const o=n.className||"",i=n.style||"",r=n.delay||0,a=n.duration||1e3,s=n.direction||1;return(n.showTrails?withTrails:iden)($.div(t,{class:`${e} ${o} animatingComponent`,style:`animation-duration:${a}ms;animation-delay:-${r}ms;animation-direction:${1===s?"normal":"reverse"};${i}`}),n)}}css(`.marquee {display:inline-block;width:100%;box-sizing:border-box;line-height:1;} .marqueeInner {display:inline-flex;} .marqueeForw